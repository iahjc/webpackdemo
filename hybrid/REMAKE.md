## hybrid
* 移动端占大部分流量，已经远远超过PC
* 一线互联网公司都有自己的APP
* 这些App中有很大比例的前端代码
* 拿微信举例，你每天浏览微信的内容，多少是前端

## 题目
* hybrid是什么，为何用hybrid？
* 介绍一下hybrid更新和上线的流程？
* hybrid和h5的主要区别
* 前端js和客户端如何通讯？

## hybrid是什么，为何用hybrid？
* hybrid文字解释
* 存在价值，为何会用hybrid
* webview
* file://协议
* hybrid实现流程

## hybrid文字解释
* hybrid即 混合，即前端和客户端的混合开发
* 需前端开发人员和客户端开发人员配合完成
* 某些环节也可能涉及到server端
* PS: 不要以为自己的前端就可以不理会客户端的知识。

## 存在价值，为何会用hybrid
* 可以快速迭代更新【关键】（无需APP审核，思考为何？）
* 体验流畅（和NA的体验基本类似）
* 减少开发和沟通成本，双端公用一套代码

## webview
* 是app中的一个组件（app可以由webview，也可以没有）
* 用于加载H5页面，即一个小型的浏览器内核

## file协议
* 其实在一开始接触html开始，就已经使用了file协议
* 只不过你当时 没有 协议 标准这些概念
* https，http，file，ftp，ssl，TCP/IP
* 再次强调 协议 标准 的重要性

## 两者区别
* file协议：本地文件，快
* http(s)协议:网络加载，慢

## 具体实现流程
* 不是所有场景都适合使用 hybrid
* 使用NA : 体验要求极致，变化不频繁（如头条的首页）
* 使用hybrid：体验要求高，变化频繁（如头条的新闻详情页）
* 使用h5：体验无要求，不常用(如举报，反馈等页面)

* 前端做好静态页面(html js css) ,将文件交给客户端
* 客户端拿到前端静态页面，以文件形式存储在app中
* 客户端在一个webview中
* 使用file协议加载静态文件

## 具体实现 - 遗留问题
* app发布之后，静态文件如何实时更新？
* 静态页面如何获取内容？

## hybrid更新上线流程
* 回顾hybrid实现流程
* 思考 (目的， 实现途径)
	* 要替换每个客户端的静态文件
	* 只能客户端来做 （客户端是我们开发的）
	* 客户端去server下载最新的静态文件
	* 我们维护server的静态文件
* 更新流程
	* 分版本，有版本号
	* 将静态文件压缩成zip包，上传到服务端
	* 客户端每次启动，都去服务端检查版本号
	* 如果服务端版本号大于客户端版本号，就去下载最新的zip包
	* 下载完之后解压包，然后将现有文件覆盖

## hybrid和h5的区别
* 优点
	* 体验更好，跟NA体验基本一致
	* 可快速迭代，无需APP审核【关键】
* 缺点
	* 开发成本高。联调，测试，查bug都比较麻烦
	* 运维成本高，上线成本大
* 使用场景
	* hybrid： 产品的稳定功能，体验要求高，迭代频繁
	* hybrid适合产品型，h5适用运营型
	* h5 单次的运营活动(如xx红包)或不常用功能

## 前端和客户端通讯
* 回顾之前遗留的问题
* js和客户端通讯的基本形式
* schema协议简介和使用
* schema使用的封装
* 内置上线

## 之前遗留的问题
* 新闻详情页适用hybrid，前端如何获取新闻内容
* 不能用ajax获取，第一跨域，第二速度慢
* 客户端获取新闻内容，然后js通信拿到内容，再渲染

## js和客户端通信的基本形式
* js访问客户端能力，传递参数和回调函数
* 客户端通过回调函数返回内容	